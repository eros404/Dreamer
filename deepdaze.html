<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'">
    <meta http-equiv="X-Content-Security-Policy" content="default-src 'self'; script-src 'self'">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/styles.css">
    <title>Dreamer</title>
  </head>
  <body class="text-navy scroll-smooth font-open">
    <main class="p-4 my-0 mx-auto max-w-3xl">
      <p id="output-directory-warning" class="text-red font-bold">Please select a valid path where Dreamer can create his output directory.</p>
      <div class="flex justify-between bg-gradient-to-t from-gray-200 to-gray-100 pl-3 rounded-md shadow">
        <p class="my-2">Output path: <code id="dreamer-output-path" class="font-bold"></code></p>
        <button id="choose-dreamer-output-path">Choose...</button>
      </div>
      <h1>Deepdaze</h1>
      <p>Deepdaze is a simple command line tool for text to image generation using OpenAI's <a target="_blank" href="https://github.com/openai/CLIP">CLIP</a> and <a target="_blank" href="https://arxiv.org/abs/2006.09661">Siren</a>.</p>
      <p>It is created by Phil Wang (<a target="_blank" href="https://github.com/lucidrains">@lucidrains</a>), you can found the source repository <a target="_blank" href="https://github.com/lucidrains/deep-daze">here</a>.</p>
      <h2>Requirements</h2>
      <p>This will require that you have an <strong>Nvidia GPU or AMD GPU</strong></p>
      <ul>
        <li>Recommended: 16GB VRAM</li>
        <li>Minimum Requirements: 4GB VRAM (using VERY LOW settings)</li>
      </ul>
      <div id="dd-install" class="bg-gradient-to-t from-gray-200 to-gray-100 px-3 rounded-md shadow">
        <h2>Installation</h2>
        <p class="font-bold"><a target="_blank" href="https://www.python.org/downloads/">Python</a> must be installed</p>
        <button id="install-deepdaze" class="btn-primary my-2">Install Deepdaze &#128295;</button>
      </p>
      </div>
      <hr>
      <div id="dd-form-container">
        <form id="dd-form" class="bg-gradient-to-t from-gray-200 to-gray-100 p-3 rounded-md shadow">
          <div class="sm:flex">
            <div class="field mr-3 flex-initial">
              <p><label for="dd-input-text">Text</label></p>
              <input id="dd-input-text" name="dd-input-text" type="text" placeholder="A Panda bicking in space" required maxlength="77" />
            </div>
            <div class="flex-auto flex">
              <div class="field flex-initial">
                <p><label for="dd-input-image">Image</label></p>
                <div>
                  <button id="dd-input-image" name="dd-input-image" type="button">Choose...</button>
                  <button id="dd-image-cancel" type="button" class="btn-cancel">&#10008;</button>
                </div>
              </div>
              <div class="justify-end flex flex-auto">
                <img id="dd-selected-image" src="" class="h-20 shadow rounded-md" />
              </div>
            </div>
          </div>
          <div class="sm:flex justify-between">
            <div>
              <div class="flex">
                <div class="field mr-3">
                  <p><label for="dd-input-epochs">Epochs</label></p>
                  <input id="dd-input-epochs" name="dd-input-epochs" type="number" value="10" min="1" max="100" />
                </div>
                <div class="field">
                  <p><label for="dd-input-iterations">Iterations</label></p>
                  <input id="dd-input-iterations" name="dd-input-iterations" type="number" value="1050" min="50" max="2100" step="50" />
                </div>
              </div>
              <div class="field">
                <p><label for="dd-input-save_every">Save every</label></p>
                <input id="dd-input-save_every" name="dd-input-save_every" type="number" value="100" min="10" max="2100" step="10" />
              </div>
              <div class="field">
                <p><label for="dd-input-image_width">Image width</label></p>
                <input id="dd-input-image_width" name="dd-input-image_width" type="number" value="256" min="16" max="1096" step="16" />
              </div>
              <div class="flex">
                <div class="field mr-3">
                  <p>
                    <input id="dd-input-open_forder" name="dd-input-open_forder" type="checkbox" checked />
                    <label for="dd-input-open_forder">Open folder</label>
                  </p>
                </div>
                <div class="field">
                  <p>
                    <input id="dd-input-save_GIF" name="dd-input-save_GIF" type="checkbox" />
                    <label for="dd-input-save_GIF">Save GIF</label>
                  </p>
                </div>
              </div>
            </div>
            <div>
              <div class="bg-gradient-to-t from-gray-300 to-gray-200 px-3 rounded-md shadow">
                <h4 class="text-center">Neural net options</h4>
                <div class="flex">
                  <div class="field mr-3">
                    <p><label for="dd-input-learning-rate">Learning rate</label></p>
                    <input id="dd-input-learning-rate" name="dd-input-learning-rate" type="number" value="0.000005" min="0.000005" max="0.0000200" step="0.0000025" />
                  </div>
                  <div class="field">
                    <p><label for="dd-input-num-layers">Number of layers</label></p>
                    <input id="dd-input-num-layers" name="dd-input-num-layers" type="number" value="16" min="12" max="44" step="4" />
                  </div>
                </div>
                <div class="flex">
                  <div class="field mr-3">
                    <p><label for="dd-input-layer-size">Layer size</label></p>
                    <input id="dd-input-layer-size" name="dd-input-layer-size" type="number" value="256" min="256" max="512" step="64" />
                  </div>
                  <div class="field">
                    <p><label for="dd-input-batch-size">Batch size</label></p>
                    <input id="dd-input-batch-size" name="dd-input-batch-size" type="number" value="4" min="4" max="64" step="4" />
                  </div>
                </div>
                <div class="field">
                  <p>
                    <input id="dd-input-deeper" name="dd-input-deeper" type="checkbox" />
                    <label for="dd-input-deeper">Deeper</label>
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="field text-center">
            <input id="dd-submit" type="submit" class="btn-primary w-2/3" value="Dream &#128640;" />
            <button id="cancel-deepdaze" type="button" class="btn-cancel w-2/3">Wake up &#9200;</button>
          </div> 
        </form>
      </div>
      <p id="console" class="bg-gray-800 text-white min-h-1.75 w-full rounded-md shadow px-2 py-1 font-mono"></p>
      <div id="process-data">
        <div class="flex w-full font-mono">
          <p class="text-center flex-initial mx-2">
            loss: <span id="process-loss"></span>
          </p>
          <div id="data-progress" class="w-40 flex-auto mx-2 h-4 border shadow mt-4">
            <div id="data-progress-bar" class="h-full bg-green bg-gradient-to-r from-darkgreen to-green"></div>
          </div>
          <p class="text-left flex-auto mx-2">
            <span id="process-current-epoch"></span>/<span id="process-total-epochs"></span> epochs
          </p>
          <p id="process-it-second" class="text-right flex-auto mx-2"></p>
        </div>
        <img id="dd-output-image" src="" class="rounded-md shadow" />
      </div>
    </main>
  </body>
  <script src="./contents/jquery-3.6.0.min.js"></script>
  <script src="./scripts/scenarios.js"></script>
  <script src="./scripts/index.js"></script>
</html>
